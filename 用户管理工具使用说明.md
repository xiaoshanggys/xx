# 商城管理后台 - 用户管理工具使用说明

## 📋 工具简介

`admin-user-manager.js` 是一个功能完整的命令行用户管理工具，用于管理MySQL数据库中的admin表用户信息。

## 🚀 使用方法

### 1. 基本启动
```bash
node admin-user-manager.js
```

### 2. 功能菜单

启动后会显示交互式菜单，包含以下功能：

```
🏪 商城管理后台 - 用户管理工具
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. 📋 查看所有用户
2. 👤 查看特定用户
3. ➕ 添加用户
4. 🔑 修改用户密码
5. 👨‍💼 修改用户角色
6. 🗑️  删除用户
7. 🧪 批量创建测试用户
0. 🚪 退出程序
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 📖 功能详解

### 1. 📋 查看所有用户
- 显示admin表中所有用户的基本信息
- 包含：ID、用户名、角色、创建时间
- 显示用户总数统计

### 2. 👤 查看特定用户
- 输入用户名查看详细信息
- 显示：ID、用户名、密码哈希、角色、创建/更新时间

### 3. ➕ 添加用户
- 交互式添加新用户
- 自动检查用户名唯一性
- 自动MD5加密密码
- 可设置用户角色（默认admin）

### 4. 🔑 修改用户密码
- 根据用户名修改密码
- 自动MD5加密新密码
- 显示加密前后的密码信息

### 5. 👨‍💼 修改用户角色
- 修改用户的角色权限
- 显示修改前后的角色对比

### 6. 🗑️ 删除用户
- 安全删除用户（需要确认）
- 显示删除前的用户信息
- 防止误删操作

### 7. 🧪 批量创建测试用户
- 快速创建test1、test2、test3测试账号
- 密码分别为test1、test2、test3
- 用于开发测试环境

## ⚙️ 配置说明

### 数据库配置
工具内置数据库配置（位于文件顶部）：
```javascript
const DB_CONFIG = {
  host: 'localhost',
  port: 3306,
  user: 'root',
  password: '708090',
  database: 'mall'
};
```

### 密码加密
- 所有密码使用MD5加密存储
- 与后台管理系统的认证方式兼容
- 确保登录时密码验证正确

## 💡 使用示例

### 添加新用户
1. 选择菜单项 `3`
2. 输入用户名：`testuser`
3. 输入密码：`mypassword`
4. 输入角色：`admin`（或直接回车使用默认值）
5. 确认创建成功

### 修改密码
1. 选择菜单项 `4`
2. 输入用户名：`testuser`
3. 输入新密码：`newpassword`
4. 确认修改成功

### 查看用户
1. 选择菜单项 `1` 查看所有用户
2. 或选择菜单项 `2` 查看特定用户详情

## 🛡️ 安全特性

- **防重复用户名**：自动检查用户名唯一性
- **密码加密**：所有密码MD5加密存储
- **操作确认**：删除操作需要二次确认
- **输入验证**：防止空值和无效输入
- **错误处理**：完善的异常处理机制

## 📝 注意事项

1. **权限要求**：确保有MySQL数据库的读写权限
2. **数据库连接**：确保MySQL服务正常运行
3. **备份建议**：重要操作前建议备份数据库
4. **密码安全**：避免使用弱密码
5. **测试环境**：批量创建功能建议仅在测试环境使用

## 🔧 故障排除

### 数据库连接失败
- 检查MySQL服务是否启动
- 确认数据库配置信息正确
- 检查网络连接

### 找不到admin表
- 确认数据库名称正确
- 检查admin表是否存在
- 运行建表语句创建表结构

### 密码验证失败
- 确认密码哈希格式正确（32位MD5）
- 检查密码加密方式是否一致
- 使用工具重新设置密码

## 📞 技术支持

如遇到问题，请检查：
1. 数据库连接配置
2. MySQL服务状态
3. 表结构是否正确
4. 权限设置是否正确

---
**开发者**：商城管理后台开发团队  
**版本**：v1.0.0  
**更新时间**：2025-07-27 